<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>階層構造演習</title>
    <link href="../static/css/structure.css" rel="stylesheet">
  </head>

  <body>
    <h1>階層構造演習</h1>

    <p>
      以下の階層構造を持つフォルダを作ってみよう！<br>
      フォルダ名、ファイル名も同じにしてね！<br>
      テキストファイル(.txt)は空のままでOKだよ！
    </p>

    <hr>
    <h2>challenge1!</h2>
    
    <p>
      フォルダー1<br>
      　┣ フォルダー2<br>
      　┃　┗ 新規 テキスト ドキュメント2.txt<br>
      　┗ 新規 テキスト ドキュメント1.txt<br>
    </p>

    <p>このフォルダの持つファイルのパス</p>

    <div id="outputA">
        フォルダー1/新規 テキスト ドキュメント1.txt
        <br>
        フォルダー1/フォルダー2/新規 テキスト ドキュメント2.txt
        <br>
    </div>
    <br>

    <p>下のボタンを押して作ったフォルダ(フォルダ1)を選択すると、想定通りの階層構造になっているかどうか確認できるぞ！</p>
    <input type="file" id="files" name="files[]" multiple webkitdirectory />
    <div id="output">選択されたフォルダの持つファイルのパスがここに表示されます</div>
    <div id="judgment"></div>

    <br>

    <hr>
    <h2>challenge2!</h2>

    <p>
      フォルダーB<br>
      　┣ text<br>
      　┃　┣ ドキュメント1.txt<br>
      　┃　┗ ドキュメント2.txt<br>
      　┣ sample<br>
      　┃　┗ sample.txt<br>
      　┗ ドキュメント3.txt<br>
    </p>

    <p>このフォルダの持つファイルのパス</p>

    <div id="outputA2">
      フォルダーB/ドキュメント3.txt<br>
      フォルダーB/text/ドキュメント1.txt<br>
      フォルダーB/text/ドキュメント2.txt<br>
      フォルダーB/sample/sample.txt<br>
    </div>

    <br>

    <p>下のボタンを押して作ったフォルダ(フォルダB)を選択すると、想定通りの階層構造になっているかどうか確認できるぞ！</p>
    <input type="file" id="files2" name="files[]" multiple webkitdirectory />
    <div id="output2">選択されたフォルダの持つファイルのパスがここに表示されます</div>
    <div id="judgment2"></div>

    <br>
    <hr>
    <a href="../structure.html">拡張子や階層構造(データの管理等)</a>
    <a href="../index.html">homeへ</a>
    <br><br><br><br><br><br><br>

    <script>
        var input = document.getElementById('files');
        var output = document.getElementById('output');
        var outputA = document.getElementById('outputA');
        var judgment = document.getElementById('judgment');

        var input2 = document.getElementById('files2');
        var output2 = document.getElementById('output2');
        var outputA2 = document.getElementById('outputA2');
        var judgment2 = document.getElementById('judgment2');


          input.onchange = function(e) {
              output.innerText  = '';
              var files = e.target.files; // FileList
                  for (var i = 0, f; f = files[i]; ++i){
                      console.debug(files[i].webkitRelativePath);
                      output.innerText  = output.innerText + files[i].webkitRelativePath+"\n";
                  }
                  if(output.innerText==outputA.innerText){
                      judgment.innerText = '\n正解！';
                  }else{
                      judgment.innerText = '\nどこか間違っているようです！\n上の想定された出力と見比べて、どこが間違っているか探してみよう';
                  }
          }


          input2.onchange = function(e) {
              output2.innerText  = '';
              var files = e.target.files; // FileList
                  for (var i = 0, f; f = files[i]; ++i){
                      console.debug(files[i].webkitRelativePath);
                      output2.innerText  = output2.innerText + files[i].webkitRelativePath+"\n";
                  }
                  if(output2.innerText==outputA2.innerText){
                      judgment2.innerText = '\n正解！';
                  }else{
                      judgment2.innerText = '\nどこか間違っているようです！\n上の想定された出力と見比べて、どこが間違っているか探してみよう';
                  }
            }

/*
共通で使える関数にしようと思ったけど難しかった       
          function  judge(e,out,outA,judgarea) {
              output=out;
              outputA=outA;
              judgment=jugarea;

              output.innerText  = '';
              var files = e.target.files; // FileList
                  for (var i = 0, f; f = files[i]; ++i){
                      console.debug(files[i].webkitRelativePath);
                      output.innerText  = output.innerText + files[i].webkitRelativePath+"\n";
                  }
                  if(output.innerText==outputA.innerText){
                      judgment.innerText = '\n正解！';
                  }else{
                      judgment.innerText = '\nどこか間違っているようです！\n上の想定された出力と見比べて、どこが間違っているか探してみよう';
                  }
          }

          input2.onchange = judge(e, output2, outputA2, judgment2);
*/
    </script>    
  </body>
</html>